{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46823434-044aaff3f806d325c686b1cda';\n\nexport default async function getImages(query, page = 1) {\n    const { data } = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page: 15,\n        },\n    });\n\n    return data;\n}\n","import SimpleLightbox from 'simplelightbox';\n\nlet lightbox;\n\nexport function renderMarkup(imagesObj) {\n    const imagesMarkupArray = imagesObj.hits.map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `<li class=\"list-item\">\n                        <a href='${largeImageURL}' class=\"image-link\"> \n                            <img src='${webformatURL}' alt=\"${tags}\">\n                        </a>\n                        <div class=\"list-item-info\">\n                            <section class=\"image-info\">\n                                <h2>Likes</h2>\n                                <p>${likes}</p>\n                            </section>\n                        \n                            <section class=\"image-info\">\n                                <h2>Views</h2>\n                                <p>${views}</p>\n                            </section>\n                        \n                            <section class=\"image-info\">\n                                <h2>Comments</h2>\n                                <p>${comments}</p>\n                            </section>\n                        \n                            <section class=\"image-info\">\n                                <h2>Downloads</h2>\n                                <p>${downloads}</p>\n                            </section>\n                        </div>                 \n                    </li> `;\n        }\n    );\n\n    return imagesMarkupArray.join('');\n}\n\nexport function lightboxInstance() {\n    lightbox ? lightbox.destroy() : '';\n    lightbox = new SimpleLightbox('.list-item a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n}\n","import getImages from './js/pixabay-api';\nimport { renderMarkup, lightboxInstance } from './js/render-functions';\nimport iziToast from 'izitoast';\n\nconst form = document.querySelector('form');\nconst imagesList = document.querySelector('ul');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet userInput;\nlet totalPage;\nlet page;\n\nform.addEventListener('submit', onsubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onsubmit(event) {\n    event.preventDefault();\n    userInput = event.target.elements.search.value;\n    page = 1;\n\n    if (!userInput) {\n        return;\n    }\n\n    imagesList.innerHTML = '';\n    document.querySelector('.loader').style.display = 'block';\n\n    try {\n        const data = await getImages(userInput);\n\n        if (!data.total) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.show({\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        totalPage = Math.ceil(Number(data.total) / 15);\n\n        const imagesMarkup = renderMarkup(data);\n        imagesList.insertAdjacentHTML('beforeend', imagesMarkup);\n        totalPage > 1 ? (loadMoreBtn.style.display = 'block') : '';\n\n        lightboxInstance();\n    } catch (error) {\n        console.log(error);\n    } finally {\n        document.querySelector('.loader').style.display = 'none';\n    }\n}\n\nasync function onLoadMore() {\n    loadMoreBtn.style.display = 'none';\n    document.querySelector('.loader').style.display = 'block';\n    page += 1;\n\n    try {\n        const data = await getImages(userInput, page);\n\n        const imagesMarkup = renderMarkup(data);\n        imagesList.insertAdjacentHTML('beforeend', imagesMarkup);\n\n        window.scrollBy({ top: 720, left: 0, behavior: 'smooth' });\n\n        lightboxInstance();\n    } catch (error) {\n        console.log(error);\n    } finally {\n        document.querySelector('.loader').style.display = 'none';\n        if (page >= totalPage) {\n            iziToast.info({\n                message:\n                    \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            loadMoreBtn.style.display = 'block';\n        }\n    }\n}\n"],"names":["API_KEY","getImages","query","page","data","axios","lightbox","renderMarkup","imagesObj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","lightboxInstance","SimpleLightbox","form","imagesList","loadMoreBtn","userInput","totalPage","onsubmit","onLoadMore","event","iziToast","imagesMarkup","error"],"mappings":"owBAEA,MAAMA,EAAU,qCAED,eAAeC,EAAUC,EAAOC,EAAO,EAAG,CACrD,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACb,CACT,CAAK,EAED,OAAOC,CACX,CChBA,IAAIE,EAEG,SAASC,EAAaC,EAAW,CAwCpC,OAvC0BA,EAAU,KAAK,IACrC,CAAC,CACG,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACZ,IACmB;AAAA,mCACgBN,CAAa;AAAA,wCACRC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,qCAK7BC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,qCAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,qCAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,qCAKRC,CAAS;AAAA;AAAA;AAAA,2BAK9C,EAE6B,KAAK,EAAE,CACpC,CAEO,SAASC,GAAmB,CAC/BV,GAAWA,EAAS,QAAS,EAC7BA,EAAW,IAAIW,EAAe,eAAgB,CAC1C,aAAc,MACd,aAAc,GACtB,CAAK,CACL,CCjDA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAa,SAAS,cAAc,IAAI,EACxCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EACAC,EACAnB,EAEJe,EAAK,iBAAiB,SAAUK,CAAQ,EACxCH,EAAY,iBAAiB,QAASI,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAK3B,GAJAA,EAAM,eAAc,EACpBJ,EAAYI,EAAM,OAAO,SAAS,OAAO,MACzCtB,EAAO,EAEH,EAACkB,EAIL,CAAAF,EAAW,UAAY,GACvB,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,QAElD,GAAI,CACA,MAAMf,EAAO,MAAMH,EAAUoB,CAAS,EAEtC,GAAI,CAACjB,EAAK,MAAO,CACbgB,EAAY,MAAM,QAAU,OAC5BM,EAAS,KAAK,CACV,QACI,2EACJ,SAAU,UAC1B,CAAa,EACD,MACH,CAEDJ,EAAY,KAAK,KAAK,OAAOlB,EAAK,KAAK,EAAI,EAAE,EAE7C,MAAMuB,EAAepB,EAAaH,CAAI,EACtCe,EAAW,mBAAmB,YAAaQ,CAAY,EACvDL,EAAY,IAAKF,EAAY,MAAM,QAAU,SAE7CJ,GACH,OAAQY,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACN,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,MACrD,EACL,CAEA,eAAeJ,GAAa,CACxBJ,EAAY,MAAM,QAAU,OAC5B,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,QAClDjB,GAAQ,EAER,GAAI,CACA,MAAMC,EAAO,MAAMH,EAAUoB,EAAWlB,CAAI,EAEtCwB,EAAepB,EAAaH,CAAI,EACtCe,EAAW,mBAAmB,YAAaQ,CAAY,EAEvD,OAAO,SAAS,CAAE,IAAK,IAAK,KAAM,EAAG,SAAU,QAAQ,CAAE,EAEzDX,GACH,OAAQY,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACN,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAC9CzB,GAAQmB,EACRI,EAAS,KAAK,CACV,QACI,6DACJ,SAAU,UAC1B,CAAa,EAEDN,EAAY,MAAM,QAAU,OAEnC,CACL"}